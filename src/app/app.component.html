<div class="header">
    <h3>The Angular Voice Analyzer</h3>

    <mat-icon 
    class="menu"
    tabindex="0"
    aria-hidden="false"
    aria-label="Menu"
    fontIcon="menu"
    [matMenuTriggerFor]="hamburgerMenu">
    </mat-icon>
</div>
<div class="indicators">
    <app-api-indicator 
        title="Speech Recognition API"
        [hasApi]="hasSpeechRecognition"
    ></app-api-indicator>
    <app-api-indicator
        title="Webkit Speech Recognition API"
        [hasApi]="hasWebkitSpeechRecognition"
    ></app-api-indicator>
</div>

<mat-tab-group #tab (selectedIndexChange)="tabChange($event)">
    <mat-tab>
        <ng-template mat-tab-label>
            API 
            @if(speechService.foundApiChange) {
                <app-api-change-indicator></app-api-change-indicator>
            }
        </ng-template>
        <ng-template matTabContent>
            <app-api></app-api>
        </ng-template>    
    </mat-tab>
    <mat-tab> 
        <ng-template mat-tab-label>
            Discrete
        </ng-template>
        <ng-template matTabContent>
            <app-discrete></app-discrete>
        </ng-template>      
    </mat-tab>
    <mat-tab>
        <ng-template mat-tab-label>
            Continuous
        </ng-template>
        <ng-template matTabContent>
            <app-continuous></app-continuous>
        </ng-template>    
    </mat-tab>
    <mat-tab>
        <ng-template mat-tab-label>
            Logs <span class="log-count">(<app-log-count-indicator></app-log-count-indicator>)</span>
        </ng-template>
        <ng-template matTabContent>
            <app-logs></app-logs>
        </ng-template>    
    </mat-tab>
</mat-tab-group>

<mat-menu #hamburgerMenu="matMenu">
    <button 
        (click)="openAboutWebsiteDialog()"
        mat-menu-item
    >About The Site</button>
    <button 
        (click)="openAboutDeveloperDialog()"
        mat-menu-item
    >About The Developer</button>
    <a href="https://www.youtube.com/playlist?list=PL2g-SceHVEbFn9l2hr7453a6SeGY2Rfv5" mat-menu-item>Development Journey</a>
    <button 
        (click)="openHowToUseWebsiteDialog()"
        mat-menu-item
    >How To Use</button>
    <button 
        (click)="openWhatCouldGoWrongDialog()"
        mat-menu-item
    >What Could Go Wrong</button>
</mat-menu>

<ng-template #aboutWebsite>
    <h1>About This Project</h1>
    <p>
    This website was developed as an interactive platform for exploring the capabilities of the Voice Recognition API available in modern web browsers. Its purpose is to provide a hands-on environment where users can experiment with both discrete and continuous modes of speech recognition, gaining a clearer understanding of how browsers interpret and process spoken input.
    </p>
    <p>
    Beyond simple experimentation, the site highlights the attributes and configuration options of the API as they were anticipated to function in mid-2025. By making these features visible and testable, the project not only demonstrates the current state of browser-based voice technology but also serves as a resource for developers, students, and enthusiasts who wish to study the API in greater depth.
    </p>
    <p>
    Ultimately, the goal of this project is to bridge the gap between technical documentation and practical experience. Rather than reading about speech recognition in the abstract, visitors are encouraged to engage directly with the tools themselves, experimenting, observing results, and forming their own insights into the evolving role of voice interaction on the web.
    </p>
</ng-template>

<ng-template #aboutDeveloper>
    <h1>About the Author</h1>

    <p>My name is Marty, and I have been programming since Christmas Day of 1980, when I first began writing code. That early curiosity grew into a lifelong pursuit. By 1996, I had shifted my focus to the emerging world of the web, building my first websites at a time when the internet was just beginning to take shape as a mainstream platform.</p>

    <p>That same year, I joined Boeing as a Systems Engineer, where my primary responsibility was writing software specifications for the AC-130U Gunship. This role gave me a strong foundation in precision, documentation, and the discipline required to design software systems for complex, mission-critical environments.</p>

    <p>In 1999, I transitioned into web development professionally, with the official title of “HTML Producer.” The field was evolving rapidly, and I embraced the challenge of keeping pace with new technologies and practices as the internet matured.</p>

    <p>More recently, in 2023, I discovered the Voice Recognition API and became deeply interested in its potential. To explore it, I first built a simple application using vanilla JavaScript, HTML, and CSS. That project laid the groundwork for a larger endeavor: creating this site. My goal was not only to deepen my understanding of the API but also to integrate it with Angular, a framework I have worked with extensively in professional settings.</p>

    <p>This website represents the culmination of that effort. Completed in the summer of 2025, it reflects both my ongoing interest in web technologies and my belief that voice interaction will play an increasingly significant role in the future of the internet.</p>
</ng-template>

<ng-template #howToUse>
    How To Use This Website
</ng-template>

<ng-template #whatCouldGoWrong>
    <div class="dialog-content">
        <h1>What Could Go Wrong</h1>
        <h2><strong>Legal Considerations</strong>: Cloud Providers Data Collection</h2>

            <table class="voice-table">
                <thead>
                <tr>
                    <th scope="col">Topic</th>
                    <th scope="col">Details</th>
                </tr>
                </thead>
                <tbody>
                <!-- 1. Which API are you actually using? -->
                <tr>
                    <td><strong>1. Which API are we using?</strong></td>
                    <td>
                    This site uses your browser’s built-in speech features (e.g., <code>SpeechRecognition</code> / Web Speech API)
                    or third-party cloud speech services depending on the browser and configuration. When recognition runs,
                    audio may be transmitted to the browser vendor’s speech servers (for example, Google for Chrome or Microsoft for Edge),
                    or to a cloud speech provider if we call a cloud SDK directly.
                    </td>
                </tr>

                <!-- 2. Legal considerations -->
                <tr>
                    <td><strong>2. Legal considerations</strong></td>
                    <td>
                    <ul>
                        <li>We do <strong>not</strong> store your raw audio on our servers by default.</li>
                        <li>Third parties (browser vendors or cloud providers) may log or retain audio/transcripts — see their privacy policies below.</li>
                        <li>Depending on your location, laws like GDPR or CCPA may require explicit disclosure and consent.</li>
                        <li>If you use this feature in sensitive contexts (health, legal, children), additional rules may apply.</li>
                    </ul>
                    </td>
                </tr>

                <!-- 3. What others typically do -->
                <tr>
                    <td><strong>3. What others typically do</strong></td>
                    <td>
                    <p>
                        Common practice is to show a clear notice and ask the user to opt in before starting voice capture. Example wording we use:
                    </p>
                    <blockquote>
                        “This site uses your browser’s speech recognition which may transmit audio to Google or Microsoft for processing.
                        We do not store your audio on our servers.”
                    </blockquote>
                    <p>Helpful links:</p>
                    <ul>
                        <li><a href="https://policies.google.com/privacy" target="_blank" rel="noopener noreferrer">Google Privacy Policy</a></li>
                        <li><a href="https://privacy.microsoft.com" target="_blank" rel="noopener noreferrer">Microsoft Privacy Statement</a></li>
                    </ul>
                    </td>
                </tr>

                <!-- 4. Ways to reduce risk -->
                <tr>
                    <td><strong>4. Ways to reduce risk</strong></td>
                    <td>
                    <ul>
                        <li>Offer an explicit “Enable Voice” button so users intentionally opt in.</li>
                        <li>Provide the short disclaimer above and link to third-party privacy pages.</li>
                        <li>Where possible, use on-device recognition (or give users a local-only option) to avoid uploading audio to the cloud.</li>
                        <li>If you rely on cloud speech for sensitive data, consider contractual / compliance steps (e.g., data processing agreement, HIPAA compliance if required).</li>
                    </ul>
                    </td>
                </tr>
                </tbody>
            </table>
        <h2><strong>API Stability:</strong> Risks and Considerations</h2>
<table class="voice-table">
    <thead>
      <tr>
        <th scope="col">Topic</th>
        <th scope="col">Details</th>
      </tr>
    </thead>
    <tbody>
      <!-- 1. Browser dependency -->
      <tr>
        <td><strong>1. Browser dependency</strong></td>
        <td>
          The Web Speech API is implemented differently in each browser, and not all browsers support it equally.
          Chrome and Edge currently use cloud-based processing (Google and Microsoft respectively),
          while other browsers may not support it at all or may drop support without notice.
        </td>
      </tr>

      <!-- 2. API versioning and breaking changes -->
      <tr>
        <td><strong>2. API versioning and breaking changes</strong></td>
        <td>
          The browser-level Web Speech API has no formal versioning or long-term stability guarantees.
          A browser update or vendor change in how the API communicates with their servers
          could break functionality or change recognition behavior overnight.
        </td>
      </tr>

      <!-- 3. Cloud API changes -->
      <tr>
        <td><strong>3. Cloud API changes</strong></td>
        <td>
          If you use explicit cloud services (e.g., Google Cloud Speech-to-Text or Microsoft Azure Speech Service),
          those APIs may change endpoints, authentication methods, pricing models, or supported languages.
          Using them without version pinning or update monitoring can result in downtime or unexpected costs.
        </td>
      </tr>

      <!-- 4. Mitigation strategies -->
      <tr>
        <td><strong>4. Mitigation strategies</strong></td>
        <td>
          <ul>
            <li>Monitor API release notes or changelogs for your chosen platform.</li>
            <li>Abstract your speech code behind a service or wrapper class so you can switch providers if needed.</li>
            <li>Implement graceful fallback behavior (e.g., show a message if speech recognition fails).</li>
            <li>Consider local/offline recognition options (e.g., Whisper, Vosk) to avoid dependency on vendor APIs.</li>
          </ul>
        </td>
      </tr>

      <!-- 5. Recommendation -->
      <tr>
        <td><strong>5. Recommendation</strong></td>
        <td>
          Treat speech recognition APIs as volatile dependencies. Avoid building critical app logic
          that depends on specific browser behavior. Keep users informed when voice features are unavailable.
        </td>
      </tr>
    </tbody>
  </table>
        <h2><strong>Feature Flag Enablement:</strong> Browser Flag Variability</h2>
<table>
  <thead>
    <tr>
      <th>Issue</th>
      <th>Description</th>
      <th>Impact</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>It works on my machine!</td>
      <td>
        Browser vendors (like Google, Microsoft, or Apple) can remotely toggle
        experimental or security-related flags that control API behavior. These
        changes may occur silently through browser updates or policy settings.
      </td>
      <td>
        Two identical computers running the same version of the browser might
        behave differently, causing inconsistent functionality or broken
        features. This makes supporting the application and debugging user
        issues difficult.
      </td>
    </tr>
  </tbody>
</table>

    </div>
</ng-template>